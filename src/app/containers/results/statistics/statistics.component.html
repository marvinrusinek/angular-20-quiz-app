@for (quiz of quizzes$ | async; track quiz.quizId) {
  @if (quiz.quizId === (quizName$ | async)) {
    <div class="statistics">
      <span class="your-score" i18n>
        You scored
        <span class="result">{{ quizMetadata.correctAnswersCount$ | async }}</span>
        out of <span class="result">{{ quizMetadata.totalQuestions }}</span>
        <span class="result">({{ quizMetadata.percentage }}%)</span>
        {{ quizMetadata.totalQuestions === 1 ? 'question' : 'questions' }}
        correctly.
      </span>

      <!-- QUIZ FEEDBACK: SWITCH ON PERCENTAGE -->
      <div class="quiz-feedback">
        @switch (percentage) {
          @case (percentage >= 80 ? percentage : null) {
            <img
              mat-card-image
              loading="lazy"
              [src]="CONGRATULATIONS"
              alt="Photo of 'Congratulations'"
              i18n-title
              title="Congratulations"
            />
          }

          @case (percentage >= 60 && percentage < 80 ? percentage : null) {
            <img
              mat-card-image
              loading="lazy"
              [src]="NOT_BAD"
              alt="Photo of 'Not Bad'"
              i18n-title
              title="Not Bad"
            />
          }

          @default {
            <img
              mat-card-image
              loading="lazy"
              [src]="TRY_AGAIN"
              alt="Photo of 'Try Again'"
              i18n-title
              title="Try Again"
            />

            <p i18n>
              Brush up your knowledge of {{ quiz.milestone }} with these valuable resources:
            </p>

            <ul>
              @for (resource of resources; track resource.url) {
                <li i18n>
                  <a [href]="resource.url" target="_blank">
                    <span class="resource-title">{{ resource.title }}</span>
                  </a>,&nbsp;
                  <span class="resource-host">{{ resource.host }}</span>
                </li>
              }
            </ul>
          }
        }
      </div>

      <!-- PROGRESS BAR -->
      @if (status === 'Completed') {
        <ngb-progressbar
          type="success"
          [striped]="true"
          [animated]="true"
          [value]="quizMetadata.percentage ?? 0"
          class="progress-bar bg-success"
        >
          <strong>{{ quizMetadata.percentage }}%</strong>
        </ngb-progressbar>
      }

      <!-- ELAPSED TIME -->
      <span class="elapsed-time" i18n>
        You completed the quiz in
        <span class="result">{{ elapsedMinutes }}</span>
        {{ elapsedMinutes === 1 ? 'minute' : 'minutes' }}
        and <span class="result">{{ elapsedSeconds }}</span> seconds.
      </span>
    </div>
  }
}