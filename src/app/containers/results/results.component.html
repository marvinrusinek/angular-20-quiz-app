<mat-card>
  <!-- Custom Header to ensure Grid Layout works perfectly -->
  <div class="results-header">
    <!-- HAMBURGER MENU (Left) -->
    <div class="hamburger-menu">
      <button 
        class="hamburger-btn" 
        (click)="toggleMenu()"
        [class.open]="menuOpen"
        aria-label="Toggle navigation menu"
      >
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>

      <!-- Dropdown Menu -->
      @if (menuOpen) {
        <nav class="nav-dropdown" (click)="$event.stopPropagation()">
          <button 
            type="button" 
            class="nav-item" 
            (click)="setActiveSection('score')"
            [class.active]="activeSection === 'score'"
          >
            <span class="nav-icon">ğŸ“Š</span>
            <span>Score Analysis</span>
          </button>

          <button 
            type="button" 
            class="nav-item" 
            (click)="setActiveSection('report')"
            [class.active]="activeSection === 'report'"
          >
            <span class="nav-icon">ğŸ“ˆ</span>
            <span>Summary Report</span>
          </button>
          
          <button 
            type="button" 
            class="nav-item" 
            (click)="setActiveSection('summary')"
            [class.active]="activeSection === 'summary'"
          >
            <span class="nav-icon">ğŸ“‹</span>
            <span>Detailed Summary</span>
          </button>
          
          <button 
            type="button" 
            class="nav-item" 
            (click)="setActiveSection('highscores')"
            [class.active]="activeSection === 'highscores'"
          >
            <span class="nav-icon">ğŸ†</span>
            <span>High Scores</span>
          </button>
          
          <button 
            type="button" 
            class="nav-item" 
            (click)="setActiveSection('resources')"
            [class.active]="activeSection === 'resources'"
          >
            <span class="nav-icon">ğŸ“š</span>
            <span>Resources</span>
          </button>

          <div class="nav-divider"></div>

          <button 
            type="button" 
            class="nav-item" 
            (click)="selectQuiz()"
          >
            <span class="nav-icon">ğŸ”™</span>
            <span>Return to Quiz Selection</span>
          </button>
        </nav>
      }
    </div>

    <!-- TITLE (Center) -->
    <h1 class="results-title" i18n>Results</h1>

    <!-- LOGO (Right) -->
    <div class="logo">
      <a href="https://www.codelab.fun" title="Angular Codelab" target="_blank">
        <img
          class="header-image"
          ngSrc="assets/images/codelab_logo.jpeg"
          width="100"
          height="50"
          alt="Angular Codelab logo"
          loading="lazy"
          (click)="selectQuiz()"
          matTooltip="Back to Codelab Quiz Selection"
          matTooltipPosition="left"
        />
      </a>
    </div>
  </div>

  <mat-card-content>
    <section class="results">
      @if (activeSection === 'score') {
        <h3 class="section-heading" i18n>Score Analysis</h3>
        
        <!-- Statistics (Score only) -->
        <codelab-results-statistics [viewMode]="'score'" />
        
      }

      @if (activeSection === 'report') {
        <!-- Summary Stats Report -->
        <codelab-results-summary [viewMode]="'summary'" />
      }

      @if (activeSection === 'summary') {
        <h3 class="section-heading" i18n>Detailed Summary</h3>
        
        <!-- Accordion (Questions Review) -->
        <section class="quiz-summary">
          <codelab-results-accordion 
            [questions]="detailedSummaryQuestions"
            [headerLabel]="headerLabel"
          />
        </section>
      }

      @if (activeSection === 'highscores') {
        <!-- High Scores Table -->
        <codelab-results-summary [viewMode]="'highscores'" />
      }

      @if (activeSection === 'resources') {
        <h3 class="section-heading" i18n>Learning Resources</h3>
        
        <!-- Resources List -->
        <codelab-results-statistics [viewMode]="'resources'" />
      }

      <!-- Next Step / Return (Global) -->
      <div class="action-buttons">
        <codelab-results-return />
      </div>

      <!-- Social Share / Challenge (Global) -->
      <codelab-results-challenge />
    </section>
  </mat-card-content>

  <app-back-to-top />
</mat-card>

<!-- Scroll Indicator (Fixed position relative to viewport) -->
<div class="scroll-indicator" (click)="scrollDown()" [class.hidden]="!showScrollIndicator">
  <i class="material-icons">keyboard_arrow_down</i>
</div>